# claude-code-dispatcher

## 概要

claude-code-dispatcherは、ClaudeCodeとGitHubを連携させるためのCLIツールです。
GitHubの指定されたユーザーがアサインされたIssueをポーリングし、FIFOキューに追加します。キューに追加されたIssueは、1つずつ処理され、ClaudeCodeによって処理されます。
ClaudeCodeはブランチの切り替えを行い、Issueの内容に基づいてコードを生成し、プルリクエストを作成します。

## 使い方

### インストール

```bash
npm install -g claude-code-dispatcher
```

## 要件

### 機能要件
- GitHub API を用いて指定ユーザーにアサインされた Issue を取得できること
- 定期的にポーリングを行い、新しい Issue を検知できること
- ポーリング間隔は引数で指定できること(デフォルトは60秒)
- 検知した Issue を FIFO キューに追加できること
- キューから取り出した Issue を ClaudeCode に渡し、順次処理できること
- ClaudeCode がブランチを切り替え、Issue 内容に基づいてコードを生成できること
- 処理が完了したら GitHub にプルリクエストを作成できること
- 対象となるリポジトリやベースブランチは引数で指定できること

### 非機能要件
- CLI としてグローバルにインストールして利用できること
- 処理中のログを出力できること
- エラー発生時にリトライまたはスキップできる仕組みを持つこと

### 運用要件
- 複数の Issue が同時にアサインされても順次処理されること
- 長時間稼働してもリソースリークが発生しないこと
- GitHub API のレートリミットを考慮すること

## MVP

### 前提条件
- ユーザーが`gh` CLIを使用してGitHubにログインしていることを前提とする
- 優先度などは考慮せず、FIFOで処理する


## コーディング規約

- TypeScriptを使用する
- ESLintとPrettierを使用してコードの品質を保つ
- TSDocを使用してドキュメントを生成する
- UNIX哲学に従う
  - 1つのツールは1つのことをうまく行う
  - 小さなツールを組み合わせて複雑な処理を実現する
  - 標準入力と標準出力を活用する
- 関数は単一責任の原則に従う
- 変数名、関数名、クラス名はわかりやすく命名する
- コメントは必要最低限にとどめ、コード自体が理解しやすいようにする
- エラーハンドリングを適切に行う
- 非同期処理はPromiseやasync/awaitを使用する
- モジュールは小さく、再利用可能な単位に分割する
- テストコードを充実させる
